<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>$EOS Trading Platform - Ethos Theme</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* ===== Reset & Base Styles ===== */
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Poppins',sans-serif;
  background:radial-gradient(circle at 20% 20%,#150024,#000000);
  color:#fff;
  display:flex;
  height:100vh;
  overflow:hidden;
}

/* ===== Animated Background ===== */
body::before{
  content:"";
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:linear-gradient(120deg,rgba(176,62,255,0.1),rgba(255,62,191,0.1));
  animation:bgMove 10s linear infinite;
  z-index:-2;
}
@keyframes bgMove{
  0%{background-position:0 0;}
  100%{background-position:400px 400px;}
}

/* ===== Sidebar ===== */
.sidebar{
  width:240px;
  backdrop-filter:blur(12px);
  background:rgba(20,20,20,0.4);
  border-right:1px solid rgba(255,255,255,0.05);
  padding:20px;
  display:flex;
  flex-direction:column;
  transition:transform 0.3s ease;
}
.sidebar h2{
  text-align:center;
  margin-bottom:20px;
  background:linear-gradient(90deg,#B03EFF,#FF3EBF);
  -webkit-background-clip:text;
  color:transparent;
  font-weight:700;
}
.sidebar ul{list-style:none;flex:1;}
.sidebar li{
  padding:10px;
  margin:5px 0;
  cursor:pointer;
  border-radius:6px;
  transition:all 0.2s;
}
.sidebar li:hover{
  background:rgba(255,62,191,0.1);
  box-shadow:0 0 10px rgba(255,62,191,0.4);
}

/* ===== Hamburger (Mobile) ===== */
.hamburger{
  display:none;
  background:linear-gradient(90deg,#B03EFF,#FF3EBF);
  padding:10px;
  border:none;
  color:#fff;
  font-size:1.2em;
  cursor:pointer;
  border-radius:4px;
}

/* ===== Main Area ===== */
.main{
  flex:1;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

/* ===== Wallet Bar ===== */
.wallet-bar{
  backdrop-filter:blur(8px);
  background:rgba(20,20,20,0.5);
  padding:10px 20px;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:20px;
  border-bottom:1px solid rgba(255,255,255,0.05);
}
.wallet-bar strong{color:#fff;}
.wallet-bar button{flex-shrink:0;}

/* ===== Buttons ===== */
button{
  padding:8px 14px;
  border:none;
  border-radius:4px;
  background:linear-gradient(90deg,#B03EFF,#FF3EBF);
  color:#fff;
  font-weight:bold;
  cursor:pointer;
  transition:all 0.3s ease;
}
button:hover{
  box-shadow:0 0 15px rgba(255,62,191,0.6);
  transform:scale(1.03);
}

/* ===== Content ===== */
.content{
  flex:1;
  overflow-y:auto;
  padding:20px;
}
.card{
  backdrop-filter:blur(10px);
  background:rgba(20,20,20,0.4);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:10px;
  padding:20px;
  margin-bottom:20px;
  box-shadow:0 0 15px rgba(255,255,255,0.05);
}
h2{
  background:linear-gradient(90deg,#B03EFF,#FF3EBF);
  -webkit-background-clip:text;
  color:transparent;
  margin-bottom:10px;
}

/* ===== Chat ===== */
.chat-box{
  height:200px;
  overflow-y:auto;
  padding:10px;
  background:rgba(0,0,0,0.3);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:6px;
}
.chat-time{color:#3EFFFF;font-size:0.8em;}
.chat-username{
  background:linear-gradient(90deg,#B03EFF,#FF3EBF);
  -webkit-background-clip:text;
  color:transparent;
  font-weight:bold;
}

/* ===== Welcome Popup ===== */
#welcomePopup{
  position:fixed;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  backdrop-filter:blur(12px);
  background:rgba(20,20,20,0.8);
  padding:20px 30px;
  border-radius:10px;
  text-align:center;
  z-index:2000;
  animation:fadeIn 0.5s ease;
}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}

/* ===== Trade Confirmations ===== */
.trade-confirm{
  position:fixed;
  top:20px;right:20px;
  padding:12px 18px;
  border-radius:6px;
  font-weight:bold;
  animation:slideFade 2s forwards;
}
.trade-buy{background-color:rgba(14,203,129,0.9);}
.trade-sell{background-color:rgba(246,70,93,0.9);}
@keyframes slideFade{
  0%{opacity:0;transform:translateY(-20px);}
  10%{opacity:1;transform:translateY(0);}
  90%{opacity:1;}
  100%{opacity:0;transform:translateY(-20px);}
}

/* ===== Mobile ===== */
@media(max-width:768px){
  .sidebar{position:fixed;height:100vh;transform:translateX(-100%);z-index:1000;}
  .sidebar.open{transform:translateX(0);}
  .hamburger{display:block;}
}
</style>
</head>
<body>

<!-- Welcome Popup -->
<div id="welcomePopup">
  <strong>Welcome to the EOS Trading Platform</strong><br>
  Simulation only — No real money is used.
</div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <h2>$EOS</h2>
  <ul>
    <li data-section="create-token"><i class="fas fa-coins"></i> Create Token</li>
    <li data-section="chat"><i class="fas fa-comments"></i> Chat</li>
    <li data-section="trade"><i class="fas fa-exchange-alt"></i> Trade</li>
    <li data-section="claim"><i class="fas fa-gift"></i> Claim</li>
    <li data-section="gamble"><i class="fas fa-dice"></i> Gamble</li>
    <li data-section="ponzi"><i class="fas fa-chart-line"></i> Ponzi</li>
  </ul>
</div>

<!-- Main -->
<div class="main">
  <div class="wallet-bar" id="walletBar">
    <button class="hamburger" onclick="toggleSidebar()">☰</button>
    <div>EOS Price: <strong id="eosPrice">$0.00</strong></div>
    <div id="walletTokens"></div>
    <button onclick="clearPortfolio()">Clear Portfolio</button>
  </div>
  <div class="content" id="content">
    <div class="card"><h2>Welcome</h2><p>Select a feature from the sidebar.</p></div>
  </div>
</div>

<script>
/* ===== Data ===== */
let tokens = JSON.parse(localStorage.getItem("tokens")) || {EOS:{symbol:"EOS",price:1}};
let balances = JSON.parse(localStorage.getItem("balances")) || {EOS:0};
let chatMessages = JSON.parse(localStorage.getItem("chat")) || [];
let username = localStorage.getItem("username") || prompt("Enter username:") || "Guest" + Math.floor(Math.random()*1000);
localStorage.setItem("username", username);

/* ===== Save Data ===== */
function saveData(){localStorage.setItem("tokens",JSON.stringify(tokens));localStorage.setItem("balances",JSON.stringify(balances));localStorage.setItem("chat",JSON.stringify(chatMessages));}

/* ===== Wallet ===== */
function updateWalletBar(){
  let tokenBalances=Object.keys(balances).map(t=>`${t}: <strong>${balances[t]}</strong>`).join(" | ");
  document.getElementById("walletTokens").innerHTML=tokenBalances||"No tokens yet";
}
function clearPortfolio(){balances={EOS:0};saveData();updateWalletBar();}

/* ===== Sidebar ===== */
function toggleSidebar(){document.getElementById("sidebar").classList.toggle("open");}

/* ===== Section Rendering ===== */
function render(section){
  const c=document.getElementById("content");
  if(["trade","claim","gamble","ponzi"].includes(section)&&Object.keys(tokens).length===0){
    c.innerHTML=`<div class='card'>⚠ No tokens found. Please create one first.</div>`;return;
  }
  if(section==="create-token"){
    c.innerHTML=`<div class='card'><h2>Create Token</h2>
      <input id="tokenName" placeholder="Token Name">
      <input id="tokenSymbol" placeholder="Symbol">
      <button onclick="createToken()">Create</button></div>`;
  }
  if(section==="chat"){
    let msgs=chatMessages.map(m=>`<div><span class='chat-time'>[${m.time}]</span> <span class='chat-username'>${m.user}:</span> ${m.text}</div>`).join("");
    c.innerHTML=`<div class='card'><h2>Chat</h2><div class='chat-box' id="chatBox">${msgs}</div>
    <input id="chatInput" placeholder="Type message..."><button onclick="sendChat()">Send</button></div>`;
    let box=document.getElementById("chatBox");box.scrollTop=box.scrollHeight;
  }
  if(section==="trade"){
    let opts=Object.keys(tokens).map(t=>`<option value="${t}">${t}</option>`).join("");
    c.innerHTML=`<div class='card'><h2>$EOS Live</h2><div id="last-price">$0.00</div><div id="chart-container" style="height:300px;"></div></div>
    <div class='card'><h2>Simulated Trading</h2>
    <select id="tradeToken">${opts}</select>
    <input id="tradeAmount" type="number" placeholder="Amount">
    <button onclick="buyToken()">Buy</button><button onclick="sellToken()">Sell</button></div>`;
    initLiveEOS();loadTradingViewChart();
  }
  if(section==="claim"){
    let opts=Object.keys(tokens).map(t=>`<option value="${t}">${t}</option>`).join("");
    c.innerHTML=`<div class='card'><h2>Claim Tokens</h2><select id="claimToken">${opts}</select>
    <button onclick="claimTokens()">Claim</button></div>`;
  }
  if(section==="gamble"){
    let opts=Object.keys(tokens).map(t=>`<option value="${t}">${t}</option>`).join("");
    c.innerHTML=`<div class='card'><h2>Gamble Tokens</h2><select id="gambleToken">${opts}</select>
    <input id="gambleAmount" type="number" placeholder="Amount"><button onclick="gambleTokens()">Gamble</button></div>`;
  }
  if(section==="ponzi"){
    let opts=Object.keys(tokens).map(t=>`<option value="${t}">${t}</option>`).join("");
    c.innerHTML=`<div class='card'><h2>Ponzi Lock</h2><select id="ponziToken">${opts}</select>
    <input id="ponziAmount" type="number" placeholder="Amount">
    <select id="ponziTime"><option value="1">1h</option><option value="2">2h</option></select>
    <button onclick="startPonzi()">Lock</button></div>`;
  }
}

/* ===== Actions ===== */
function createToken(){
  let name=document.getElementById("tokenName").value.trim();
  let sym=document.getElementById("tokenSymbol").value.trim();
  if(!name||!sym)return alert("Invalid");
  tokens[name]={symbol:sym,price:1};balances[name]=0;saveData();updateWalletBar();alert(`Token ${name} created`);
}
function sendChat(){
  let msg=document.getElementById("chatInput").value.trim();
  if(!msg)return;
  chatMessages.push({user:username,text:msg,time:new Date().toLocaleTimeString()});
  saveData();render("chat");
}
function buyToken(){
  let t=document.getElementById("tradeToken").value;
  let amt=parseFloat(document.getElementById("tradeAmount").value);
  if(isNaN(amt)||amt<=0)return;
  balances[t]=(balances[t]||0)+amt;saveData();updateWalletBar();showTradeConfirmation(`Bought ${amt} ${t}`,"buy");
}
function sellToken(){
  let t=document.getElementById("tradeToken").value;
  let amt=parseFloat(document.getElementById("tradeAmount").value);
  if(isNaN(amt)||amt<=0||!balances[t]||balances[t]<amt)return;
  balances[t]-=amt;saveData();updateWalletBar();showTradeConfirmation(`Sold ${amt} ${t}`,"sell");
}
function claimTokens(){
  let t=document.getElementById("claimToken").value;
  balances[t]=(balances[t]||0)+100;saveData();updateWalletBar();alert(`Claimed 100 ${t}`);
}
function gambleTokens(){
  let t=document.getElementById("gambleToken").value;
  let amt=parseFloat(document.getElementById("gambleAmount").value);
  if(isNaN(amt)||amt<=0||balances[t]<amt)return;
  if(Math.random()<0.5){balances[t]+=amt;alert("You won!");}else{balances[t]-=amt;alert("You lost!");}
  saveData();updateWalletBar();
}
function startPonzi(){alert("Ponzi feature placeholder");}

/* ===== Live EOS Price ===== */
function initLiveEOS(){
  const ws=new WebSocket('wss://stream.binance.com:9443/ws/eosusdt@trade');
  ws.onmessage=e=>{
    let data=JSON.parse(e.data);
    let price=parseFloat(data.p).toFixed(4);
    document.getElementById("eosPrice").textContent=`$${price}`;
    let lp=document.getElementById("last-price");if(lp)lp.textContent=`$${price}`;
  };
}

/* ===== TradingView Chart ===== */
function loadTradingViewChart(){
  const s=document.createElement('script');s.src="https://s3.tradingview.com/tv.js";
  s.onload=()=>{
    new TradingView.widget({width:"100%",height:300,symbol:"BINANCE:EOSUSDT",interval:"30",timezone:"Etc/UTC",theme:"dark",style:"1",locale:"en",container_id:"chart-container"});
  };
  document.body.appendChild(s);
}

/* ===== Trade Confirmation ===== */
function showTradeConfirmation(text,type){
  let div=document.createElement("div");
  div.className=`trade-confirm trade-${type}`;
  div.textContent=text;
  document.body.appendChild(div);
  setTimeout(()=>div.remove(),2000);
}

/* ===== Init ===== */
document.querySelectorAll('.sidebar li').forEach(li=>{
  li.addEventListener('click',()=>{
    render(li.dataset.section);
    if(window.innerWidth<768)toggleSidebar();
  });
});
setTimeout(()=>{document.getElementById("welcomePopup").style.opacity="0";setTimeout(()=>{document.getElementById("welcomePopup").remove();},500);},4000);
updateWalletBar();
</script>
</body>
</html>
